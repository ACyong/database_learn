# sql函数
> 在 SQL 语言中，包括了内置函数和自定义函数。内置函数是系统内置的通用函数。

注意：
```
DBMS 之间的差异性很大，远大于同一个语言不同版本之间的差异，这就意味着采用 SQL 函数的代码可移植性是很差的，因此在使用函数的时候需要特别注意。尽管 SQL 函数使用起来会很方便，但使用的时候还是要谨慎，因为使用的函数很可能在运行环境中无法工作。
```
---

## 1、算术函数

| 函数名   | 定义    |
| ------- | -------|
| ABS()   | 取绝对值 | 
| MOD()   | 取余 | 
| ROUND() | 四舍五入为指定额小数位，需要两个参数，分别是字段名和小数位 | 

例：
```
SELECT ABS(-2)，运行结果为 2。
SELECT MOD(101,3)，运行结果 2。
SELECT ROUND(37.25,1)，运行结果 37.3。
```

## 2、字符串函数

| 函数名   | 定义    |
| ------- | -------|
| CONCAT()   | 将多个字符拼接起来 | 
| LENGTH()   | 计算字段长度，一个汉字算三个长度，一个数字或字母算一个长度 | 
| CHAR_LENGTH() | 计算字段长度，一个汉字、数字或字母算一个长度 | 
| LOWER()   | 将字符串中的字符转换为小写 | 
| UPPER()   | 将字符串中的字符转换为大写    | 
| REPLACE()   | 替换函数，有3个参数，分别为：要替换的表达式或字段名、想要查找的被替换字符串、替换成那个字符串 | 
| SUBSTRING() | 截取字符串，有3个参数，分别为：带截取的表达式或字段名、开始截取的位置、想要截取的字符串长度 | 

例：
```
SELECT CONCAT('abc', 123)，运行结果为 abc123。
SELECT LENGTH('你好')，运行结果为 6。
SELECT CHAR_LENGTH('你好')，运行结果为 2。
SELECT LOWER('ABC')，运行结果为 abc。
SELECT UPPER('abc')，运行结果 ABC。
SELECT REPLACE('fabcd', 'abc', 123)，运行结果为 f123d。
SELECT SUBSTRING('fabcd', 1,3)，运行结果为 fab。
```

## 3、日期函数

| 函数名   | 定义    |
| ------- | -------|
| CURRENT_DATE()   | 系统当前日期 | 
| CURRENT_TIME()   | 系统当前时间，没有日期 | 
| CURRENT_TIMESTAMP()   | 系统当前时间，包括具体的日期 + 时间 | 
| EXTRACT()   | 抽取具体的年月日 | 
| DATE()   | 返回时间日期部分 | 
| YEAR()   | 返回时间年部分 | 
| MONTH()  | 返回时间月部分 | 
| DAY()    | 返回时间日部分 | 
| HOUR()   | 返回时间小时部分 | 
| MINUTE()   | 返回时间分钟部分 | 
| SCONED()   | 返回时间秒部分 | 

例：
```
SELECT CURRENT_DATE()，运行结果为 2019-04-03。
SELECT CURRENT_TIME()，运行结果为 21:26:34。
SELECT CURRENT_TIMESTAMP()，运行结果为 2019-04-03 21:26:34。
SELECT EXTRACT(YEAR FROM '2019-04-03')，运行结果为 2019。
SELECT DATE('2019-04-01 12:00:05')，运行结果为 2019-04-01。
```

## 4、转换函数

| 函数名   | 定义    |
| ------- | -------|
| CAST()   | 数据类型转换，参数是一个表达式，表达式通过AS关键字分割了两个参数，分别是原始数据和目标数据 | 
| COALESCE()   | 返回第一个非空值 | 

例：
```
SELECT CAST(123.123 AS INT)，运行结果会报错。
SELECT CAST(123.123 AS DECIMAL(8,2))，运行结果为 123.12。
SELECT COALESCE(null,1,2)，运行结果为 1。
```

注意：
```
CAST 函数在转换数据类型的时候，不会四舍五入，如果原数值有小数，那么转换为整数类型的时候就会报错。不过可以指定转化的小数类型，可以用DECIMAL(a,b)来指定，其中 a 代表整数部分和小数部分加起来最大的位数，b 代表小数位数，比如DECIMAL(8,2)代表的是精度为 8 位（整数加小数位数最多为 8 位），小数位数为 2 位的数据类型。所以SELECT CAST(123.123 AS DECIMAL(8,2))的转换结果为 123.12。
```
