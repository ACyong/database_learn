# 子查询
> 子查询是一种嵌套查询的形式，可以依据子查询是否执行多次，从而将子查询划分为关联子查询和非关联子查询。
---

## 1. 非关联子查询

子查询从数据表中查询了数据结果，如果这个数据结果只执行一次，然后这个数据结果作为主查询的条件进行执行，那么这样的子查询叫做非关联子查询

举个例子：
```
SELECT name, gender FROM users WHERE user_id = (select user_id from orders group by user_id order by count(id) desc limit 1);
```

通过 (select user_id from orders group by user_id order by count(id) desc limit 1) 可以得到下单数最多的用户 user_id，结果再通过 users 这个表，看个用户的具体信息，再进行输出，这样的子查询就是非关联子查询。


## 2. 关联子查询

如果子查询需要执行多次，即采用循环的方式，先从外部查询开始，每次都传入子查询进行查询，然后再将结果反馈给外部，这种嵌套的执行方式就称为关联子查询

举个例子:
```
SELECT player_name, height, team_id FROM player AS a WHERE height > (SELECT avg(height) FROM player AS b WHERE a.team_id = b.team_id)
```

首先需要统计球队的平均身高，即SELECT avg(height) FROM player AS b WHERE a.team_id = b.team_id，然后筛选身高大于这个数值的球员姓名、身高和球队 ID

## 3. EXISTS

关联子查询通常也会和 EXISTS 一起来使用，EXISTS 子查询用来判断条件是否满足，满足的话为 True，不满足为 False。


## 4. 集合比较子查询

集合比较子查询的作用是与另一个查询结果集进行比较，我们可以在子查询中使用 IN、ANY、ALL 和 SOME 操作符


注：程序中不要出现关联子查询，尤其是循环次数很多的查询
